# OP62541-IIoTDPT-CNC
Contains the codes and DATA from the paper "Open62541-Enabled OPC UA Integrated Advanced IIoT Digital Process Twin Framework for CNC Machining Operations"
Five Layered Open62541-Enabled OPC UA integrated  Industrial Internet of Things (IIoT) Digital Process Twin Framework
OP62541-IIoTDPT-CNC
Setup procedure

Following a comprehensive literature review, a supervisory type [17] of Digital Process Twin (DPT) has been developed, linking real-time sensor data analysis to gain insights into machine operations. This model is widely adopted in the industry for its capability to analyze diverse data types. Taking all these factors into account, the developed IIoT digital twin framework comprises five distinct layers, as illustrated in Fig. 1. Each layer has a specific role, and together they form a comprehensive system that integrates physical devices with digital simulations and data-driven decision-making. The functional setup, methodology and importance of each layer is described below.
(i)	Physical Layer: This layer includes all the physical devices and sensors that collect data from the real world. It comprises components such as temperature and humidity sensors, an Arduino board [37], a CNC ST 30 lathe, and cutting tools. The Arduino board, programmed in C++ [38], controls these sensors and devices, ensuring accurate data collection from the physical environment.
a.	In this layer a CNC machine is needed and all connection pertaining to Arduino or other microcontroller must be completed. If Arduino is used it must be connected to the laptop and must be verified for the output in the Arduino IDE monitor. Code for the Arduino for the same sensors are give in the git hub named as Ardunio_TempHum-Acc.zip
(ii)	Virtual Layer: This layer creates the digital representation of the physical assets. Using Siemens NX software, it models and simulates the CNC lathe and other physical components, providing a virtual twin of the physical setup. 
b.	In this layer Siemens NX is used for generation of GM codes. The generated GM codes for the process is given with the name GMCode.txt
(iii)	Data Layer: This layer handles data collection, storage, and processing. It includes components such as the Open 62541 server [39], Node-RED interface [40], and Insights Hub interface [41]. The Open 62541 server, programmed in C, and Node-RED, using JavaScript, manage data flows and integrate various data sources. Insights Hub stores and processes the data, for further analysis and decision-making.
c.	In this layer first Open62541 and Node-Red must be installed following standard installation procedures. You must have Insights hubs subscription (basic). Once these are available, the code for server ArdunioOPCUA.c must be compiled and an executable must be generated. 
d.	Paralley Node-Red must be tested with the serial port connection and the connectivity must be completed with insights hub. The flow for Node-red is given in ALLOPCUA-flows_GitHub.json
(iv)	Interaction Layer: This layer facilitates interaction between the Open 62541 server, users, and the system. It includes components like a laptop, Node-RED interface, and Insights Hub. The laptop serves as the user interface, while Node-RED is used to create dashboards and control interfaces. Insights Hub manages interactions, allowing users to interact with the system. This layer incorporates AI-based synthetic data generation and machine learning model training to enhance interaction capabilities.
e.	In this Layer, the output can be seen both in the node red and the insights hub. The same needs to be seen in the UA expert. Please note UA expert must be installed.
f.	DATA extracted during the machining process is given in Accele_DATA_10TrialsOriginalSyntheticValues_GitHub.zip. It also contains the data generated using LSTM models with 5000 data points for each trial.
g.	GM code to signal peaks can be analysed using python code PythonApplication4GMcode.zip
h.	RAW data from insights hub is given in Raw DATA_InsightsHub.zip
i.	ML training data and outputs are provided in ML_Training_Outputs_Predict_Git.zip
(v)	Decision Layer: This layer is responsible for making decisions based on the data. It includes the Insights Hub interface, which provides data visualization and rules-making capabilities. This layer automates decision-making processes, enabling intelligent responses and actions based on the collected data. It also incorporates machine learning model prediction to improve decision-making accuracy and efficiency.
j.	In this layer the decision-making rules needs to be setup in the insights hub or can also be done using node-red (if insights hub subscription is not available). Use email notifications to get enabled by modifying the function node to suit the accelerometer and temperature/humidity values. In case the insights hub is used then the two communications of receiving and processing any changes can be implemented.
